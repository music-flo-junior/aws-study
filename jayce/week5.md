# EC2
EC2란, AWS에서 제공하 클라우드 컴퓨팅 서비스이다.

### EC2의 장점
1. 빠른 제품 출시
2. 확장성
3. 통제성
4. 신뢰성
5. 보안성
6. 다양한 인스턴스 타입
7. 통합
8. 비용 효율성

### EC2가 지원하는 운영체제
- Windows
- Amazon Linux
- Debian
- SUSE
- CentOS
- Red Hat Enterprise Linux
- Ubuntu

### EC2의 인스턴스 타입
- 범용 인스턴스
- 컴퓨트 최적화 인스턴스
- 메모리 최적화 인스턴스
- 스토리지 최적화 인스턴스
- 고성능 컴퓨트 인스턴스

#### 범용 인스턴스
범용 인스턴스는 컴퓨팅 파워와 메모리, 네트워크 등 리소스의 균형을 맞춘 인스턴스 타입이다
> T3, T3a, T2, M6g, M5, M5a, M5n, M4, A1

이 타입중 대표적은 T3과 T2는 평균 수준의 CPU 파워를 기본으로 하되, 처리량 급등 시 이 수준을 능가할 수 있는 성능 가속 기능을 추가한 인스턴스 타입이다.
즉, 대기 상태에서는 할당된 CPU 크레딧을 절약하다가 필요할때 CPU 크레딧을 소모한다.

##### 성능 가속 기능(burstable performance)
표준 EC2 인스턴스는 고정 CPU 활성화 기능을 제공하기 때문에 미사용 CPU를 활성화해서 사용할 수는 없다. 
이에 반해 성능 가속기가 추가된 인스턴스는 가속 CPU 활성화 기능을 제공해 기준치 이상을 사용할 수 있게 한다.

#### 컴퓨터 최적화 인스턴스
고도의 컴퓨팅 파워가 요구되는 워크로드를 처리하기 위한 인스턴스 타입이다.
> C6g, C5, C5a, C5n, C4

#### 메모리 최적화 인스턴스
고성능 메모리가 요구되는 워크로드를 처리하기 위한 인스턴스 타입이다.
메모리에서 막대한 양의 데이터를 처리하는 애플리케이션의 경우 메모리 최적화 인스턴스가 적합하다.
> R6g, R5, R5a, R5n, R4, X1e, X1, High Memory, Z1d

#### 스토리지 최적화 인스턴스
대규모 데이터 세트를 순차적 읽기 및 쓰기 방식으로 접근하는 것과 같은 워크로드를 처리하기 위한 인스턴스 타입이다.
> l3, l3en, D2, H1

#### 고성능 컴퓨팅 인스턴스
머신러닝, 세포 모델링, 유전공학, 유체역학 등... 탁월한 수준의 컴퓨팅 파워가 요구되는 수준의 인스턴스 타입이다.
> P3, P2, lnf1, G4, G3, F1

### 프로세스 특징
EC2 인스턴스는 인텔 프로세서를 사용하기 때문에 인텔이 제공하는 모든 프로세스의 특징적 기능을 사용 할 수 있다.

### 네트워크 특징
EC2 인스턴스는 항상 VPC 내부에 런칭하는 것이 좋다.

### 스토리지 특징
EBS볼륨을 인스턴스에 부착해 사용한다.

#### 스토리지의 종류
- 범용 스토리지(GP2)
- 프로비전 IOPS 스토리지
- 마그네틱 스토리지

### 가격 정책

#### 온디맨드 인스턴스
대표가 되는 가격 모델로 인스턴스 사용 기간에 따라 시간당 요금제 또는 초당 과금제로 비용을 지불한다.

#### 예약 인스턴스
예약 인스턴스는 기간을 정해 사용 하는 가격 정책이라고 보면 쉽다. 온디맨드 인스턴스에 비해 최대 75%의 요금 할인을 받을 수 있다.

##### 비용 지불 옵션
1. 1년,3년 모두 선불
2. 1년,3년 일부 선불
3. 1년,3년 선불 없음

#### 스팟 인스턴스
여유가 생긴 컴퓨터 자원을 사용자에게 경매 입창 방식으로 제공한다. 최대 90% 할인된 금액으로 인스턴스를 사용 할 수 있다.

### 공유 테넌시, 전용 호스트, 전용 인스턴스
물리적인 서버 수준에 비해 가상 화된 인스턴스의 성능이 다소 낮아질 수 있는데, 이러한 문제는 전용 호스트 및 전용 인스턴스를 사용하면 해결된다

#### 공유 테넌시
사용자가 EC2 인스턴스를 론칭하면 기본적으로 적용 되는 가상화 조건으로 EC2 인스턴스를 멀티 테넌시 하드웨어에서 실행한다

#### 전용 호스트
전용 호스트는 특정 사용자에게만 배타적으로 할당된 물리적 서버이며, 윈도우 서버, SQL 서버, SUSE 리녹스 엔터프라이즈 서버 등 기업의 필요에 따라 다양한 소프트웨어를 탑재해서 사용할 수 있어 비용 효율성이 높다

#### 전용 인스턴스
전용인스턴스는 단일 테넌트 하드웨어에서 EC2 인스턴스를 실행하며,개별 사용자에게만 할당된 하드웨어의 VPC에서 Amazon EC2 인스턴스를 실행한다 

### 인스턴스와 AMI
AMI는 아마존 클라우드에서 제공해주는 머신 이미지이다. AMI에는 운영체제,애플리케이션 서버 그리고 그위에서 실행되는 애플리케이션 등에 대한 세부 내용을 모두 담고 있다.

#### AMI의 론칭 승인 정보
AMI에는 AWS 계정에 따라 AMI를 통해 인스턴스를 론칭 할 수 있는지 정의한다

- 퍼블릭 : 소유자가 모든 AWS 계정 사용자에게 론칭 승인을 부여
- 명시적 : 소유자가 특정 AWS 계정 사용자에게만 론칭 승인을 부여
- 암묵적 : 소유자가 암묵적으로 AMI를 통한 론칭 승인을 부여

#### 인스턴스 루트 볼륨
인스턴스 루트 디바이스에는 인스턴스 부팅을 위한 이미지가 포함돼 있다. 

##### 인스턴스 스토어 기반 AMI
EC2 인스턴스를 론칭하면 모든 루트 디바이스는 S3로부터 론칭에 필요한 정보를 가져온다. 인스턴스가 실행되는 한 인스턴스 스토어 볼륨에 있는 모든 데이터는 유지되지만, 인스턴스가 삭제되면 모든 데이터도 사라진다.
또한 중지 동작이 지원되지 않는다. 인스턴스 스토어 AMI 기반의 인스턴스가 실패 또는 삭제되면 저장된 데이터는 복구 할 수 없다. 단 재부팅은 데이터가 유지된다.

##### 인스턴스 EBS 기반 AMI (현재 방식?)
EC2 인스턴스를 론칭하면 EBS 스냅샷을 통해 인스턴스 루트 볼륨에 복사되면서 제공된다. 인스턴스 테이터는 인스턴스의 다양한 상태에서도 그대로 유지된다.

#### AMI에서의 가상화

- HVM
- PV

### 인스턴스 라이프 사이클

- 시작 및 정지
- 재부팅
- 인스턴스 삭제
- 인스턴스 폐기

### 시큐리티 그룹

- 기본적으로 시큐리티 그룹은 모든 아웃바운드 트래픽을 허용한다
- EC2-Classic의 시큐리티 그룹에 있는 아웃바운드 규칙은 변경할 수 없다.
- 시큐리티 그룹의 규칙은 언제나 허용 여부만 정하고 거부 여부는 정할 수 없다.
- 시큐리티 그룹은 스테이트풀 속성을 지닌다. VPC 시큐리티 그룹의 경우 인바운드 트래픽이 허용된 응답은 아웃바운드 규칙에 상관없이 유출이 허용된다.

### Amazon Elastic Container Service
EC2 클러스터에서 도커 컨테이너를 관리할 수 있게 해주는 컨테이너 관리 서비스이다. Amazon ECS를 이용하면 간단한 API 호출 만으로 손쉽게 컨테이너 기반 서비스를 런칭할 수 있다.

#### Amazon ECS 장점
- 클러스터 관리 소프트웨어를 설치할 필요가 없음
- 어떤 규모의 클러스터도 쉽게 관리 가능
- ECS를 이용해 내오류성 클러스터 아키텍처 설계
- 클러스터 상태 관리 가능
- 세밀한 컨테이너 통제 및 모니터링 가능
